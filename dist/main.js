!function(t){var e={};function a(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);const i={SAN_FRANCISCO:{adjustedSalary:99751,city:"San Francisco",color:"#f1c40f",constant:"SAN_FRANCISCO",class:"city-San-Francisco",diversity:[{ethnicity:"White",percentage:.41},{ethnicity:"Asian",percentage:.33},{ethnicity:"Hispanic",percentage:.15},{ethnicity:"Black",percentage:.05}],rentalCosts:[{type:"Studio",price:2130},{type:"1BR",price:2639},{type:"2BR",price:3286},{type:"3BR",price:4291},{type:"4BR",price:4567}],happinessRank:10,medianHomePrice:1331100,medianSalary:12e4,jobs:7947,position:{x:20,y:160},sunnyDays:256,points:0},NEW_YORK:{adjustedSalary:1e5,city:"New York",color:"#2980b9",constant:"NEW_YORK",class:"city-New-York",diversity:[{ethnicity:"White",percentage:.32},{ethnicity:"Asian",percentage:.13},{ethnicity:"Hispanic",percentage:.28},{ethnicity:"Black",percentage:.22}],rentalCosts:[{type:"Studio",price:1743},{type:"1BR",price:1788},{type:"2BR",price:2049},{type:"3BR",price:2600},{type:"4BR",price:2771}],happinessRank:90,medianHomePrice:662100,medianSalary:11e4,jobs:8364,position:{x:625,y:135},sunnyDays:224,points:0},BOSTON:{adjustedSalary:90171,city:"Boston",color:"#e74c3c",constant:"BOSTON",class:"city-Boston",diversity:[{ethnicity:"White",percentage:.46},{ethnicity:"Asian",percentage:.09},{ethnicity:"Hispanic",percentage:.18},{ethnicity:"Black",percentage:.22}],rentalCosts:[{type:"Studio",price:1639},{type:"1BR",price:1836},{type:"2BR",price:2238},{type:"3BR",price:2805},{type:"4BR",price:3027}],happinessRank:58,medianHomePrice:587e3,medianSalary:1e5,jobs:3630,position:{x:650,y:100},sunnyDays:200,points:0},PORTLAND:{adjustedSalary:89374,city:"Portland",color:"#e67e22",constant:"PORTLAND",class:"city-Portland",diversity:[{ethnicity:"White",percentage:.71},{ethnicity:"Asian",percentage:.07},{ethnicity:"Hispanic",percentage:.09},{ethnicity:"Black",percentage:.05}],rentalCosts:[{type:"Studio",price:1123},{type:"1BR",price:1225},{type:"2BR",price:1432},{type:"3BR",price:2073},{type:"4BR",price:2516}],happinessRank:84,medianHomePrice:427500,medianSalary:9e4,jobs:2359,position:{x:45,y:90},sunnyDays:144,points:0},SEATTLE:{adjustedSalary:105735,city:"Seattle",color:"#1abc9c",constant:"SEATTLE",class:"city-Seattle",diversity:[{ethnicity:"White",percentage:.66},{ethnicity:"Asian",percentage:.14},{ethnicity:"Hispanic",percentage:.06},{ethnicity:"Black",percentage:.07}],rentalCosts:[{type:"Studio",price:1570},{type:"1BR",price:1728},{type:"2BR",price:2108},{type:"3BR",price:3033},{type:"4BR",price:3583}],happinessRank:54,medianHomePrice:761800,medianSalary:113242,jobs:10417,position:{x:45,y:40},sunnyDays:152,points:0},AUSTIN:{adjustedSalary:90171,city:"Austin",color:"#34495e",constant:"AUSTIN",class:"city-Austin",diversity:[{ethnicity:"White",percentage:.48},{ethnicity:"Asian",percentage:.06},{ethnicity:"Hispanic",percentage:.34},{ethnicity:"Black",percentage:.07}],rentalCosts:[{type:"Studio",price:1017},{type:"1BR",price:1186},{type:"2BR",price:1437},{type:"3BR",price:1897},{type:"4BR",price:2294}],happinessRank:14,medianHomePrice:346500,medianSalary:1e5,jobs:4308,position:{x:320,y:350},sunnyDays:228,points:0},SAN_JOSE:{adjustedSalary:100989,city:"San Jose",color:"#9b59b6",constant:"SAN_JOSE",class:"city-San-Jose",diversity:[{ethnicity:"White",percentage:.27},{ethnicity:"Asian",percentage:.32},{ethnicity:"Hispanic",percentage:.33},{ethnicity:"Black",percentage:.02}],rentalCosts:[{type:"Studio",price:1927},{type:"1BR",price:2286},{type:"2BR",price:2807},{type:"3BR",price:3797},{type:"4BR",price:4350}],happinessRank:8,medianHomePrice:1083e3,medianSalary:122500,jobs:3023,position:{x:35,y:190},sunnyDays:204,points:0},RALEIGH:{adjustedSalary:9e4,city:"Raleigh",color:"#f39c12",constant:"RALEIGH",class:"city-Raleigh",diversity:[{ethnicity:"White",percentage:.54},{ethnicity:"Asian",percentage:.04},{ethnicity:"Hispanic",percentage:.1},{ethnicity:"Black",percentage:.28}],rentalCosts:[{type:"Studio",price:868},{type:"1BR",price:975},{type:"2BR",price:1115},{type:"3BR",price:1435},{type:"4BR",price:1811}],happinessRank:23,medianHomePrice:260100,medianSalary:94142,jobs:1377,position:{x:600,y:210},sunnyDays:213,points:0},DENVER:{adjustedSalary:85878,city:"Denver",color:"#2980b9",constant:"DENVER",class:"city-Denver",diversity:[{ethnicity:"White",percentage:.52},{ethnicity:"Asian",percentage:.03},{ethnicity:"Hispanic",percentage:.31},{ethnicity:"Black",percentage:.09}],rentalCosts:[{type:"Studio",price:1083},{type:"1BR",price:1265},{type:"2BR",price:1585},{type:"3BR",price:2231},{type:"4BR",price:2588}],happinessRank:41,medianHomePrice:421900,medianSalary:9e4,jobs:1973,position:{x:250,y:170},sunnyDays:245,points:0},PHOENIX:{adjustedSalary:86765,city:"Phoenix",color:"#c0392b",constant:"PHOENIX",class:"city-Phoenix",diversity:[{ethnicity:"White",percentage:.46},{ethnicity:"Asian",percentage:.03},{ethnicity:"Hispanic",percentage:.4},{ethnicity:"Black",percentage:.06}],rentalCosts:[{type:"Studio",price:793},{type:"1BR",price:928},{type:"2BR",price:1147},{type:"3BR",price:1659},{type:"4BR",price:1900}],happinessRank:127,medianHomePrice:229300,medianSalary:87997,jobs:1491,position:{x:150,y:255},sunnyDays:299,points:0}},s=1e3,r=0,c=d3.easePoly,n=200,l=200,o=100;var y=class{constructor(t,e){this.setChart(t,e),this.setData()}setChart(t,e={topOffset:0,leftOffset:0}){const a=d3.select(t).attr("height",l+2*o).attr("width",n+2*o);this.chart=a.append("g").attr("transform",`translate(${o+e.leftOffset}, ${o/2+e.topOffset})`)}setData(){this.data=i}xAxis(t,e,a=5,i=(()=>{})){this.xScale=d3[e]().domain(t).range([0,n]),this.chart.append("g").call(d3.axisBottom(this.xScale).ticks(a).tickFormat(i())).attr("transform",`translate(0, ${l})`)}yAxis(t,e,a=5,i=(()=>{})){this.yScale="scaleBand"===e?d3[e]().domain(t).range([0,n]).padding(.8):d3[e]().domain(t).range([0,n]),this.chart.append("g").call(d3.axisLeft(this.yScale).ticks(a).tickFormat(i()))}gridLines(t,e,a=5){this.chart.append("g").attr("class","grid").call(d3[e]().scale(t).tickSize(n,0,0).tickFormat("").ticks(a))}rectangleLabels(t){this.chart.selectAll().data(this.sortedData).enter().append("text").attr("class",t=>`city ${t.class} bar-label city-data-toggle`).attr("x",5).attr("y",t=>this.yScale(t.city)-2).style("fill","#fff").text((e,a)=>"string"==typeof t?e[t]:t.call(e,a)).style("opacity",0)}labelTop(t){this.chart.append("text").attr("class","label-text").attr("text-anchor","middle").attr("x",n/2).attr("y",-20).text(t)}};var d=class extends y{constructor(t){super(t),this.sortData(),this.xAxis([120,300],"scaleLinear"),this.yAxis(this.sortedData.map(t=>t.city),"scaleBand"),this.rectangles(),this.gridLines(this.xScale,"axisBottom"),this.rectangleLabels("sunnyDays"),this.labelTop("Sunny Days Per Year")}sortData(){this.sortedData=Object.values(this.data).sort((t,e)=>e.sunnyDays-t.sunnyDays)}rectangles(){this.chart.selectAll().data(this.sortedData).enter().append("rect").attr("class",t=>`city ${t.class}`).attr("x",1).attr("y",t=>this.yScale(t.city)).attr("height",this.yScale.bandwidth()).style("fill",t=>t.color).transition().delay((t,e)=>e*r).duration(s).ease(c).attr("width",t=>this.xScale(t.sunnyDays))}};var p=class extends y{constructor(t){super(t),this.sortData(),this.xAxis([0,135e4],"scaleLinear",2,()=>d3.format("$~s")),this.yAxis(this.sortedData.map(t=>t.city),"scaleBand"),this.rectangles(),this.gridLines(this.xScale,"axisBottom"),this.rectangleLabels(function(){return d3.format("$.2~s")(this.medianHomePrice)}),this.labelTop("Median Home Price")}sortData(){this.sortedData=Object.values(this.data).sort((t,e)=>t.medianHomePrice-e.medianHomePrice)}rectangles(){this.chart.selectAll().data(this.sortedData).enter().append("rect").attr("class",t=>`city ${t.class}`).attr("x",1).attr("y",t=>this.yScale(t.city)).attr("height",this.yScale.bandwidth()).style("fill",t=>t.color).transition().ease(c).delay((t,e)=>e*r).duration(s).attr("width",t=>this.xScale(t.medianHomePrice))}};var h=class extends y{constructor(t){super(t),this.ethnicities=["White","Asian","Hispanic","Black"],this.xAxis(this.ethnicities,"scaleBand"),this.yAxis([1,0],"scaleLinear",4,()=>d3.format(".0%")),this.circles(),this.percentageLabels(),this.labelTop("Diversity"),this.gridLines(this.xScale,"axisBottom"),this.gridLines(this.yScale,"axisRight")}lines(){let t=d3.line().x(t=>this.xScale(t.ethnicity)).y(t=>this.yScale(t.percentage));this.chart.selectAll(".line").data(Object.values(this.data)).enter().append("path").attr("transform","translate(25, 5)").attr("class",t=>`line city ${t.class}`).attr("d",e=>t(e.diversity)).style("stroke",t=>t.color).style("stroke-width",2).style("stroke-linecap","round")}circles(){this.chart.selectAll().data(Object.values(this.data)).enter().append("g").attr("class",t=>`city ${t.class}`).attr("fill",t=>t.color).selectAll().data(t=>t.diversity).enter().append("circle").attr("cx",t=>this.xScale(t.ethnicity)+25).transition().delay((t,e)=>e*r).duration(s).ease(c).attr("r",3).attr("cy",t=>this.yScale(t.percentage))}percentageLabels(){this.chart.selectAll().data(()=>Object.values(this.data)).enter().append("g").attr("class",t=>`city ${t.class} city-data-toggle`).selectAll(".line-point").data(t=>t.diversity).enter().append("text").attr("text-anchor","middle").text(t=>d3.format(".0%")(t.percentage)).attr("x",t=>this.xScale(t.ethnicity)+25).attr("y",t=>this.yScale(t.percentage)-10).style("fill","white")}};var u=class extends y{constructor(t){super(t),this.types=["Studio","1BR","2BR","3BR","4BR"],this.xAxis(this.types,"scalePoint"),this.yAxis([4500,500],"scaleLinear",4,()=>d3.format("$~s")),this.lines(),this.circles(),this.percentageLabels(),this.labelTop("Rental Cost"),this.gridLines(this.xScale,"axisBottom"),this.gridLines(this.yScale,"axisRight")}lines(){let t=d3.line().x(t=>this.xScale(t.type)).y(t=>this.yScale(t.price));this.chart.selectAll().data(Object.values(this.data)).enter().append("path").style("stroke",t=>t.color).style("stroke-width",2).style("stroke-linecap","round").attr("class",t=>`line city ${t.class}`).attr("d",e=>t(e.rentalCosts)).transition().delay((t,e)=>e*r).duration(s).ease(c)}circles(){this.chart.selectAll().data(Object.values(this.data)).enter().append("g").attr("class",t=>`city ${t.class}`).attr("fill",t=>t.color).selectAll().data(t=>t.rentalCosts).enter().append("circle").attr("cx",t=>this.xScale(t.type)).transition().delay((t,e)=>e*r).duration(s).ease(c).attr("r",3).attr("cy",t=>this.yScale(t.price))}percentageLabels(){const t=d3.format("$.2~s");this.chart.selectAll().data(()=>Object.values(this.data)).enter().append("g").attr("class",t=>`city ${t.class} city-data-toggle`).selectAll(".line-point").data(t=>t.rentalCosts).enter().append("text").attr("text-anchor","middle").text(e=>t(e.price)).attr("x",t=>this.xScale(t.type)).attr("y",t=>this.yScale(t.price)-10).style("fill","white")}};var g=class extends y{constructor(t){super(t),this.svg=d3.select(t),this.circle(),this.cityLabel(),this.ranking(),this.pointer()}circle(){this.svg.selectAll().data(Object.values(this.data)).enter().append("circle").attr("r",10).style("fill",t=>t.color).attr("class",t=>`city ${t.class} city-pinpoint`).transition().ease(c).duration(s).attr("cy",t=>t.position.y).attr("cx",t=>t.position.x).style("z-index",10).style("cursor","pointer")}cityLabel(){this.svg.selectAll("text").data(Object.values(this.data)).enter().append("text").attr("opacity",0).attr("class",t=>`map-city-label city ${t.class}`).text(t=>t.city).style("font-size",14).style("stroke-width",3).style("fill",t=>t.color).transition().ease(c).duration(s/1.5).attr("opacity",1).attr("x",t=>"New York"===t.city?t.position.x-90:"Boston"===t.city?t.position.x-75:"Raleigh"===t.city?t.position.x-80:t.position.x+25).attr("y",t=>t.position.y+5).style("z-index",10)}ranking(){this.svg.selectAll(".ranking").data(Object.values(this.data)).enter().append("text").text(t=>t.ranking).style("fill","white").style("font-size",12).style("font-weight",700).attr("class",t=>`city ${t.class} city-pinpoint`).transition().ease(c).duration(s).attr("y",t=>t.position.y+4).attr("x",t=>t.position.x).style("text-anchor","middle")}pointer(){}};var x=class extends y{constructor(t){super(t,{topOffset:155,leftOffset:80}),this.render()}render(){this.setChartVariables(),this.addPieChart(),this.addCityLabel(),this.addCountLabel(),this.topLabel()}setChartVariables(){this.radius=Math.min(n,l)/2.5,this.pie=d3.pie().value(t=>t.jobs),this.arc=d3.arc().innerRadius(90).outerRadius(this.radius),this.labelArc=d3.arc().innerRadius(this.radius).outerRadius(this.radius+100),this.percentageArc=d3.arc().innerRadius(this.radius/2-30).outerRadius(this.radius)}addPieChart(){this.chart.selectAll().data(this.pie(Object.values(this.data))).enter().append("path").attr("class",t=>`city ${t.data.class}`).attr("d",this.arc).attr("fill",t=>t.data.color)}addCityLabel(){this.chart.selectAll().data(this.pie(Object.values(this.data))).enter().append("text").attr("class",t=>`city ${t.data.class}`).attr("text-anchor","middle").attr("transform",t=>`translate(${this.labelArc.centroid(t)})`).text(t=>t.data.city).transition().ease(c).delay((t,e)=>e*r).duration(s).attr("transform",t=>{let e=t.endAngle<Math.PI?t.startAngle/2+t.endAngle/2:t.startAngle/2+t.endAngle/2+Math.PI;return`translate(${this.labelArc.centroid(t)[0]}, ${this.labelArc.centroid(t)[1]}) rotate(-95) rotate(${180*e/Math.PI})`})}addCountLabel(){this.chart.selectAll().data(this.pie(Object.values(this.data))).enter().append("text").attr("class",t=>`city ${t.data.class} city-data-toggle`).attr("text-anchor","middle").attr("transform",t=>`translate(${this.percentageArc.centroid(t)})`).text(t=>t.data.jobs)}topLabel(){this.chart.append("text").attr("text-anchor","middle").attr("class","label-text").text("Open Jobs").attr("y",-175)}};var S=class extends y{constructor(t){super(t),this.sortData(),this.xAxis([75e3,125e3],"scaleLinear",5,()=>d3.format("$~s")),this.yAxis(this.sortedData.map(t=>t.city),"scaleBand"),this.rectanglesMedianSalary(),this.rectanglesAdjustedSalary(),this.gridLines(this.xScale,"axisBottom"),this.rectangleLabels(function(){return d3.format("$.3~s")(this.adjustedSalary)}),this.rectangleMedianLabels(),this.labelTop("Adjusted & Median Salary")}sortData(){this.sortedData=Object.values(this.data).sort((t,e)=>t.cost-e.cost)}rectanglesAdjustedSalary(){this.chart.selectAll().data(this.sortedData).enter().append("rect").attr("class",t=>`city ${t.class} bar-label`).attr("x",1).attr("y",t=>this.yScale(t.city)).attr("height",this.yScale.bandwidth()).style("fill",t=>t.color).transition().ease(c).delay((t,e)=>e*r).duration(s).attr("width",t=>this.xScale(t.adjustedSalary))}rectanglesMedianSalary(){this.chart.selectAll().data(this.sortedData).enter().append("rect").attr("class",t=>`city ${t.class}`).attr("x",1).attr("y",t=>this.yScale(t.city)).attr("height",this.yScale.bandwidth()).style("fill","#111").transition().ease(c).delay((t,e)=>e*r).duration(s).attr("width",t=>this.xScale(t.medianSalary))}rectangleMedianLabels(){this.chart.selectAll().data(this.sortedData).enter().append("text").style("fill","#000").attr("class",t=>`city ${t.class} median-salary city-data-toggle`).attr("y",(t,e)=>this.yScale(t.city)+5).text(t=>d3.format("$.3~s")(t.medianSalary)).transition().ease(c).delay((t,e)=>e*r).duration(s).attr("x",t=>this.xScale(t.medianSalary)+5)}};var m=class{constructor(){this.filterTicks(),this.filterData(),this.colorTitle()}filterTicks(){d3.selectAll(".tick text").attr("class",function(t){return this.textContent,`city city-${this.textContent.split(" ").join("-")}`})}filterData(){d3.selectAll(".city").on("mouseover",(t,e)=>{let a;a="string"==typeof t?`city-${t.split(" ").join("-")}`:t.data?t.data.class:t.class,document.querySelectorAll(`.city:not(.${a})`).forEach(t=>{t.classList.add("filter")}),document.querySelectorAll(`.${a}.city-data-toggle`).forEach(t=>{t.classList.add("show")})}).on("mouseleave",()=>{document.querySelectorAll(".city").forEach(t=>{t.classList.remove("filter")}),document.querySelectorAll(".city-data-toggle").forEach(t=>{t.classList.remove("show")})})}colorTitle(){const t=d3.select("h1");d3.selectAll(".city").on("mouseenter",e=>{let a;a=e.data?e.data.color:e.color,t.style("color",a)}).on("mouseout",e=>{t.style("color","white")})}};var f=class{constructor(){this.calculatePointsForSalary(),this.calculatePointsForMedianHomePrice(),this.calculatePointsForSunnyDays(),this.calculatePointsForDiversity(),this.calculatePointsForJobs(),this.setRankings()}calculatePointsForSalary(){this.calculateBy((t,e)=>e.adjustedSalary-t.adjustedSalary,3)}calculatePointsForHappiness(){this.calculateBy((t,e)=>t.happinessRank-e.happinessRank,1.5)}calculatePointsForMedianHomePrice(){this.calculateBy((t,e)=>t.medianHomePrice-e.medianHomePrice,3)}calculatePointsForSunnyDays(){this.calculateBy((t,e)=>e.sunnyDays-t.sunnyDays)}calculatePointsForDiversity(){this.calculateBy((t,e)=>{let a=0,i=0;return t.diversity.forEach(t=>{t.percentage>10&&(a+=1)}),e.diversity.forEach(t=>{t.percentage>10&&(i+=1)}),e.bDiversityPoints-t.aDiversityPoints})}calculatePointsForJobs(){this.calculateBy((t,e)=>e.jobs-t.jobs,2)}setRankings(){Object.values(i).sort((t,e)=>t.points-e.points).forEach((t,e)=>{i[t.constant].ranking=e+1})}calculateBy(t,e=1){Object.values(i).sort(t).forEach((t,a)=>i[t.constant].points+=a*e)}};document.addEventListener("DOMContentLoaded",()=>{new f,new d("svg.sunnyDays"),new S("svg.salary"),new p("svg.medianHomeCost"),new h("svg.diversity"),new u("svg.happiness"),new g("svg.map"),new x("svg.jobMarket"),new m})}]);